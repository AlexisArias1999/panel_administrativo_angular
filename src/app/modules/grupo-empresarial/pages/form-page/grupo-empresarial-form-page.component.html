<form [formGroup]="formGrupoEmpresarial" autocomplete="off" class="row g-3">
    <div class="row g-3">
        <h3>Grupo empresarial</h3>
        <div class="col-md-2">
            <label for="inputCodigoUnico" class="form-label">CUC (Código Unico Cliente)</label>
            <input type="text" class="form-control" id="inputCodigoUnico" formControlName="codigo">
            @if (isValidFieldGrupoEmpresarial('codigo')) {
            <span class="form-text text-danger">
                El CUC no puede estar vacío
            </span>
            }
        </div>
        <div class="col-md-3">
            <label for="inputCorreoElectronico" class="form-label">Correo Electrónico</label>
            <input type="text" class="form-control" id="inputCorreoElectronico" formControlName="correo">
            @if (isValidFieldGrupoEmpresarial('correo')) {
            <span class="form-text text-danger">
                El correo electrónico no puede estar vacío
            </span>
            }
        </div>
        <div class="col-md-3">
            <label for="inputNombres" class="form-label">Nombres</label>
            <input type="text" class="form-control" id="inputNombres" formControlName="nombres">
            @if (isValidFieldGrupoEmpresarial('nombres')) {
            <span class="form-text text-danger">
                El nombre no puede estar vacío
            </span>
            }
        </div>
        <div class="col-md-2">
            <label for="inputContacto" class="form-label">Contacto</label>
            <input type="text" class="form-control" id="inputContacto" formControlName="contacto">
        </div>
        <div class="col-md-2">
            <label for="inputTelefono" class="form-label">Teléfono</label>
            <input type="text" class="form-control" id="inputTelefono" formControlName="telefono">
        </div>
    </div>




    <div class="row g-3" formGroupName="informacion_grupo_empresarial">
        <h4>Información Empresa</h4>
        <div class="col-md-2">
            <label for="inputInformacionRuc" class="form-label">RUC</label>
            <input type="text" class="form-control" id="inputInformacionRuc" placeholder="" formControlName="ruc">
            @if (isValidFieldInformacionGrupoEmpresarial('ruc')) {
            <span class="form-text text-danger">
                El RUC no puede estar vacío
            </span>
            }
        </div>
        <div class="col-md-5">
            <label for="inputInformacionRazonSocial" class="form-label">Razón Social</label>
            <input type="text" class="form-control" id="inputInformacionRazonSocial" placeholder=""
                formControlName="razon_social">
            @if (isValidFieldInformacionGrupoEmpresarial('razon_social')) {
            <span class="form-text text-danger">
                La Razón Social no puede estar vacío
            </span>
            }
        </div>
        <div class="col-md-5">
            <label for="inputInformacionRazonSocial" class="form-label">Representante Legal</label>
            <input type="text" class="form-control" id="inputInformacionRazonSocial" placeholder=""
                formControlName="representante_legal">
            @if (isValidFieldInformacionGrupoEmpresarial('representante_legal')) {
            <span class="form-text text-danger">
                El Representante Legal no puede estar vacío
            </span>
            }
        </div>
        <div class="col-md-3">
            <label for="inputInformacionTelefono" class="form-label">Télefono</label>
            <input type="text" class="form-control" id="inputInformacionTelefono" placeholder=""
                formControlName="telefono">
        </div>
        <div class="col-md-6">
            <label for="inputInformacionDireccion" class="form-label">Dirección</label>
            <input type="text" class="form-control" id="inputInformacionDireccion" placeholder=""
                formControlName="direccion">
        </div>
        <div class="col-md-3">
            <label for="inputInformacionDireccion" class="form-label">País</label>
            <input type="text" class="form-control" id="inputInformacionDireccion" placeholder=""
                formControlName="pais">
        </div>
    </div>


    <div formGroupName="informacion_grupo_empresarial">
        <div formGroupName="informacion_tecnica" class="row g-3">
            <h4>Información Técnica</h4>
            <div class="col-md-2">
                <label for="inputInformacionTecnicaServidor" class="form-label">Ubicación</label>
                <input type="text" class="form-control" id="inputInformacionTecnicaServidor" placeholder=""
                    formControlName="ubicacion">
                @if (isValidFieldInformacionTecnica('ubicacion')) {
                <span class="form-text text-danger">
                    La ubicación no puede estar vacío
                </span>
                }
            </div>
            <div class="col-md-2">
                <label for="inputInformacionTecnicaServidor" class="form-label">Servidor</label>
                <input type="text" class="form-control" id="inputInformacionTecnicaServidor" placeholder=""
                    formControlName="servidor">
                @if (isValidFieldInformacionTecnica('servidor')) {
                <span class="form-text text-danger">
                    El servidor no puede estar vacío
                </span>
                }
            </div>
            <div class="col-md-4">
                <label for="inputInformacionTecnicaDb" class="form-label">Base de datos</label>
                <input type="text" class="form-control" id="inputInformacionTecnicaDb" placeholder=""
                    formControlName="db">
                @if (isValidFieldInformacionTecnica('db')) {
                <span class="form-text text-danger">
                    El nombre de base de datos no puede estar vacío
                </span>
                }
            </div>
            <div class="col-md-2">
                <label for="inputInformacionTecnicaUsuario" class="form-label">Usuario</label>
                <input type="text" class="form-control" id="inputInformacionTecnicaUsuario" placeholder=""
                    formControlName="usuario">
                @if (isValidFieldInformacionTecnica('usuario')) {
                <span class="form-text text-danger">
                    El usuario de la base de datos no puede estar vacío
                </span>
                }
            </div>
            <div class="col-md-2">
                <label for="inputInformacionTecnicaClave" class="form-label">Clave</label>
                <input type="text" class="form-control" id="inputInformacionTecnicaClave" placeholder=""
                    formControlName="clave">
                @if (isValidFieldInformacionTecnica('clave')) {
                <span class="form-text text-danger">
                    La clave del usuario usuario no puede estar vacío
                </span>
                }
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked"
                    formControlName="facturacion">
                <label class="form-label" for="flexSwitchCheckChecked">Facturación Electrónica</label>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <button type="button" class="btn btn-primary" (click)="agregarInformacionGrupoEmpresarial()">Agregar</button>
    </div>
</form>

@if (dataInformacionGrupoEmpresarial.length > 0) {
<!-- <table mat-table [dataSource]="dataInformacionGrupoEmpresarial">

    <ng-container matColumnDef="razon_social">
        <th mat-header-cell *matHeaderCellDef>Dueño</th>
        <td mat-cell *matCellDef="let element"> {{element.razon_social}} </td>
    </ng-container>

    <ng-container matColumnDef="ruc">
        <th mat-header-cell *matHeaderCellDef>RUC</th>
        <td mat-cell *matCellDef="let element"> {{element.ruc}} </td>
    </ng-container>
    <ng-container matColumnDef="facturacion">
        <th mat-header-cell *matHeaderCellDef>Facturación Electrónica</th>
        <td mat-cell *matCellDef="let element"> {{element.ruc}} </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="columns"></tr>
    <tr mat-row *matRowDef="let row; columns: columns;"></tr>
</table> -->


<table class="table mat-elevation-z8">
    <thead>
        <tr>
            <th scope="col">Razón Social</th>
            <th scope="col">Ruc</th>
            <th scope="col">Facturación Electrónica</th>
        </tr>
    </thead>
    <tbody>
        @for (item of dataInformacionGrupoEmpresarial; track $index) {
        <tr>
            <td>{{item.razon_social}}</td>
            <td>{{item.ruc}}</td>
            <!-- <td>{{item.informacion_tecnica?.facturacion ? 'Si' : 'No'}}</td> -->
            <td>
                @for (info of item.informacion_tecnica; track $index) {
                {{info.facturacion ? 'Si' : 'No'}}
                }
            </td>
        </tr>
        }
    </tbody>
</table>


<div class="col-12">
    <button type="button" class="btn btn-primary" (click)="guardarGrupoEmpresarial()">Guardar</button>
</div>
}